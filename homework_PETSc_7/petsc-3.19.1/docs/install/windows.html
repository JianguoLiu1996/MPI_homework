
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Installing PETSc On Microsoft Windows &#8212; PETSc 3.19.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/katex-math.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script src="../_static/katex.min.js"></script>
    <script src="../_static/auto-render.min.js"></script>
    <script src="../_static/katex_autorenderer.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'install/windows';</script>
    <link rel="shortcut icon" href="../_static/petsc_favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Maintaining Your PETSc Installation(s)" href="multibuild.html" />
    <link rel="prev" title="Configuring PETSc" href="install.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
    <img src="../_static/PETSc-TAO_RGB.svg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/PETSc-TAO_RGB_white.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manual/index.html">
                        User-Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manualpages/index.html">
                        C/Fortran API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../petsc4py/petsc4py.html">
                        Python API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../faq/index.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../community/index.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../developers/index.html">
                        Developers
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../miscellaneous/index.html">
                        Misc.
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://gitlab.com/petsc/petsc" title="GitLab" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manual/index.html">
                        User-Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manualpages/index.html">
                        C/Fortran API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../petsc4py/petsc4py.html">
                        Python API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../faq/index.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../community/index.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../developers/index.html">
                        Developers
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../miscellaneous/index.html">
                        Misc.
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://gitlab.com/petsc/petsc" title="GitLab" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_tutorial.html">Quick Start Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Configuring PETSc</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Installing PETSc On Microsoft Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="multibuild.html">Maintaining Your PETSc Installation(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="external_software.html">Supported External Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="installing-petsc-on-microsoft-windows">
<span id="doc-windows"></span><h1>Installing PETSc On Microsoft Windows<a class="headerlink" href="#installing-petsc-on-microsoft-windows" title="Permalink to this heading">#</a></h1>
<div class="yellow admonition">
<p class="admonition-title">Are You Sure?</p>
<p>Are you sure you want to use Microsoft Windows? We recommend using Linux if possible
(and minimize troubleshooting Microsoft Windows related issues).</p>
</div>
<section id="recommended-installation-methods">
<h2>Recommended Installation Methods<a class="headerlink" href="#recommended-installation-methods" title="Permalink to this heading">#</a></h2>
<p>The following configurations are much like regular Unix-like systems. Our regular
(Unix-like) instructions should work with them. Most <a class="reference internal" href="external_software.html#doc-externalsoftware"><span class="std std-ref">external packages</span></a> will also work. The <code class="docutils literal notranslate"><span class="pre">configure</span></code> option <code class="docutils literal notranslate"><span class="pre">--download-mpich</span></code>
should work for these systems. Note however that these <strong>do not</strong> support Microsoft/Intel
Windows compilers; nor can you use MS-MPI, Intel-MPI or MPICH2).</p>
<ul>
<li><p><a class="reference external" href="https://www.cygwin.com/">Cygwin</a> Unix emulator for Microsoft Windows. See the
instructions below for installing Cygwin for PETSc.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to install the GNU compilers, and commons components, <strong>do not</strong> use the
<code class="docutils literal notranslate"><span class="pre">win32fe</span></code> <a class="footnote-reference brackets" href="#win32" id="id1">1</a> script:</p>
<ul class="simple">
<li><p>python3</p></li>
<li><p>make</p></li>
<li><p>gcc-core gcc-g++ gcc-fortran</p></li>
<li><p>liblapack-devel</p></li>
<li><p>openmpi libopenmpi-devel</p></li>
</ul>
</div>
</li>
<li><p><a class="reference external" href="https://www.msys2.org">MSYS2</a>. See more details below.</p></li>
<li><p>Microsoft Windows Subsystem for Linux 2 (<a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">WLS2</a>). Largely untested, let
us know your experience. Be sure to use WSL2 vs WSL1 for best performance.</p></li>
<li><p><a class="reference external" href="https://docs.docker.com/docker-for-windows/">Docker</a> for Microsoft
Windows. Untested, let us know your experience.</p></li>
<li><p>Linux virtual machine via <a class="reference external" href="https://www.virtualbox.org/">VirtualBox</a>. One sample
tutorial is at <a class="reference external" href="https://www.psychocats.net/ubuntu/virtualbox">https://www.psychocats.net/ubuntu/virtualbox</a>. Google can provide more
tutorials. Untested, let us know your experience.</p></li>
</ul>
</section>
<section id="installation-with-microsoft-intel-windows-compilers">
<h2>Installation With Microsoft/Intel Windows Compilers<a class="headerlink" href="#installation-with-microsoft-intel-windows-compilers" title="Permalink to this heading">#</a></h2>
<p>Microsoft Windows does not provide the same Unix shell environment as the other OSes. Also
the default Microsoft/Intel compilers behave differently than other Unix compilers. So to
install PETSc on Microsoft Windows - one has to install Cygwin (for the Unix environment)
and use <code class="docutils literal notranslate"><span class="pre">win32fe</span></code> <a class="footnote-reference brackets" href="#win32" id="id2">1</a> (located at <code class="docutils literal notranslate"><span class="pre">$PETSC_DIR/lib/petsc/bin/win32fe</span></code>, to
interface to Microsoft/Intel compilers).</p>
<ol class="arabic">
<li><p>Install Cygwin:</p>
<p>Download and install Cygwin from <a class="reference external" href="http://www.cygwin.com">http://www.cygwin.com</a> and make sure the
following components are installed:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure the following Cygwin components are installed:</p>
<ul class="simple">
<li><p>python3</p></li>
<li><p>make</p></li>
<li><p>(default selection should already have diff and other tools)</p></li>
</ul>
<p>Additional Cygwin components like git and CMake can be useful for installing
<a class="reference internal" href="external_software.html#doc-externalsoftware"><span class="std std-ref">external packages</span></a>.</p>
</div>
</li>
<li><p>Remove Cygwin link.exe:</p>
<p>Cygwin link.exe can conflict with Intel ifort compiler. If you are using ifort -
do (from Cygwin terminal/bash-shell):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mv<span class="w"> </span>/usr/bin/link.exe<span class="w"> </span>/usr/bin/link-cygwin.exe
</pre></div>
</div>
</li>
<li><p>Setup Cygwin terminal/bash-shell with Working Compilers:</p>
<p>We require the compilers to be setup properly in a Cygwin bash command shell, so that
<code class="docutils literal notranslate"><span class="pre">cl</span> <span class="pre">foo.c</span></code> or <code class="docutils literal notranslate"><span class="pre">ifort</span> <span class="pre">foo.f</span></code> works from this shell. For example - if using VS2005 C
and Intel 10 Fortran one can do:</p>
<ol class="arabic">
<li><p>Start &gt; Programs &gt; Intel Software Development Tools &gt; Intel Fortran
Compiler 10 &gt; Visual Fortran Build Environment (32bit or 64bit depending on
your usage). This should start a “dos cmd” shell.</p></li>
<li><p>Within this shell - run Cygwin terminal/bash-shell <code class="docutils literal notranslate"><span class="pre">mintty.exe</span></code> as:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>C:<span class="se">\c</span>ygwin<span class="se">\b</span>in<span class="se">\m</span>intty.exe
</pre></div>
</div>
</li>
<li><p>Verify if the compilers are useable (by running cl, ifort in this Cygwin
terminal/bash-shell).</p></li>
<li><p>Now run <code class="docutils literal notranslate"><span class="pre">configure</span></code> with <code class="docutils literal notranslate"><span class="pre">win32fe</span></code> <a class="footnote-reference brackets" href="#win32" id="id3">1</a> and then build the libraries with
make (as per the usual instructions)</p></li>
</ol>
</li>
</ol>
<section id="example-configure-usage-with-microsoft-windows-compilers">
<h3>Example Configure Usage With Microsoft Windows Compilers<a class="headerlink" href="#example-configure-usage-with-microsoft-windows-compilers" title="Permalink to this heading">#</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">configure</span></code> with VC2005 C and Intel Fortran 10 (without MPI):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./configure<span class="w"> </span>--with-cc<span class="o">=</span><span class="s1">&#39;win32fe cl&#39;</span><span class="w"> </span>--with-fc<span class="o">=</span><span class="s1">&#39;win32fe ifort&#39;</span><span class="w"> </span>--with-cxx<span class="o">=</span><span class="s1">&#39;win32fe cl&#39;</span><span class="w"> </span>--with-mpi<span class="o">=</span><span class="m">0</span><span class="w"> </span>--download-fblaslapack
</pre></div>
</div>
<p>If fortran, c++ usage is not required, use:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./configure<span class="w"> </span>--with-cc<span class="o">=</span><span class="s1">&#39;win32fe cl&#39;</span><span class="w"> </span>--with-fc<span class="o">=</span><span class="m">0</span><span class="w"> </span>--with-cxx<span class="o">=</span><span class="m">0</span><span class="w"> </span>--download-f2cblaslapack
</pre></div>
</div>
<section id="using-mpi">
<h4>Using MPI<a class="headerlink" href="#using-mpi" title="Permalink to this heading">#</a></h4>
<p>We support both MS-MPI [64-bit] and Intel MPI on Microsoft Windows (MPICH2 does not work,
do not use it). For example usages, check <code class="docutils literal notranslate"><span class="pre">$PETSC_DIR/config/examples/arch-mswin*.py</span></code></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Avoid spaces in $PATH</strong></p>
<p>Its best to avoid spaces or similar special chars when specifying <code class="docutils literal notranslate"><span class="pre">configure</span></code> options. On
Microsoft Windows - this usually affects specifying MPI or MKL. Microsoft Windows
supports dos short form for dir names - so its best to use this notation. Cygwin
tool <code class="docutils literal notranslate"><span class="pre">cygpath</span></code> can be used to get paths in this notation. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cygpath<span class="w"> </span>-u<span class="w"> </span><span class="sb">`</span>cygpath<span class="w"> </span>-ms<span class="w"> </span><span class="s1">&#39;/cygdrive/c/Program Files (x86)/Microsoft SDKs/MPI&#39;</span><span class="sb">`</span>
<span class="go">/cygdrive/c/PROGRA~2/MICROS~2/MPI</span>
<span class="gp">$ </span>cygpath<span class="w"> </span>-u<span class="w"> </span><span class="sb">`</span>cygpath<span class="w"> </span>-ms<span class="w"> </span><span class="s1">&#39;/cygdrive/c/Program Files (x86)/IntelSWTools/compilers_and_libraries/windows/mkl/lib/intel64&#39;</span><span class="sb">`</span>
<span class="go">/cygdrive/c/PROGRA~2/INTELS~1/COMPIL~2/windows/mkl/lib/intel64</span>
</pre></div>
</div>
<p>Then use in <code class="docutils literal notranslate"><span class="pre">configure</span></code> as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./configure<span class="w"> </span>--with-cc<span class="o">=</span><span class="s1">&#39;win32fe cl&#39;</span><span class="w"> </span>--with-fc<span class="o">=</span><span class="s1">&#39;win32fe ifort&#39;</span><span class="w"> </span>--with-cxx<span class="o">=</span><span class="s1">&#39;win32fe cl&#39;</span><span class="w"> </span><span class="se">\</span>
--with-shared-libraries<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
--with-mpi-include<span class="o">=</span><span class="s1">&#39;[/cygdrive/c/PROGRA~2/MICROS~2/MPI/Include,/cygdrive/c/PROGRA~2/MICROS~2/MPI/Include/x64]&#39;</span><span class="w"> </span><span class="se">\</span>
--with-mpi-lib<span class="o">=</span><span class="s1">&#39;-L/cygdrive/c/PROGRA~2/MICROS~2/MPI/lib/x64 msmpifec.lib msmpi.lib&#39;</span><span class="w"> </span><span class="se">\</span>
--with-mpiexec<span class="o">=</span>/cygdrive/c/PROGRA~1/MICROS~2/Bin/mpiexec<span class="w"> </span><span class="se">\</span>
--with-blaslapack-lib<span class="o">=</span><span class="s1">&#39;-L/cygdrive/c/PROGRA~2/INTELS~1/COMPIL~2/windows/mkl/lib/intel64 mkl_intel_lp64_dll.lib mkl_sequential_dll.lib mkl_core_dll.lib&#39;</span>
</pre></div>
</div>
</div>
</section>
<section id="external-packages">
<h4>External Packages<a class="headerlink" href="#external-packages" title="Permalink to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">--download-package</span></code> option works with many <a class="reference internal" href="external_software.html#doc-externalsoftware"><span class="std std-ref">external packages</span></a> on Microsoft Windows, but there may be some portability issues with others.
Let us know your experience and we will either try to fix them or report them upstream.</p>
</section>
<section id="project-files">
<h4>Project Files<a class="headerlink" href="#project-files" title="Permalink to this heading">#</a></h4>
<p>We cannot provide Microsoft Visual Studio project files for users as they are specific to
the <code class="docutils literal notranslate"><span class="pre">configure</span></code> options, location of <a class="reference internal" href="external_software.html#doc-externalsoftware"><span class="std std-ref">external packages</span></a>,
compiler versions etc. used for any given build of PETSc, so they are potentially
different for each build of PETSc. So if you need a project file for use with PETSc -
do the following.</p>
<ol class="arabic">
<li><p>Create an empty project file with one of the examples say
<code class="docutils literal notranslate"><span class="pre">$PETSC_DIR/src/ksp/ksp/tutorials/ex2.c</span></code></p></li>
<li><p>Try compiling the example from Cygwin bash shell - using makefile - i.e.:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$PETSC_DIR</span>/src/ksp/ksp/tutorials
<span class="gp">$ </span>make<span class="w"> </span>ex2
</pre></div>
</div>
</li>
<li><p>If the above works - then make sure all the compiler/linker options used by <code class="docutils literal notranslate"><span class="pre">make</span></code>
are also present in the project file in the correct notation.</p></li>
<li><p>If errors - redo the above step. If all the options are correctly specified, the
example should compile from MSDev.</p></li>
</ol>
</section>
<section id="debugger">
<h4>Debugger<a class="headerlink" href="#debugger" title="Permalink to this heading">#</a></h4>
<p>Running PETSc probrams with <code class="docutils literal notranslate"><span class="pre">-start_in_debugger</span></code> is not supported on this platform, so debuggers will need to be initiated manually. Make sure your environment is properly configured to use the appropriate debugger for your compiler. The debuggers can be initiated using Microsoft Visual Studio 6:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>msdev<span class="w"> </span>ex1.exe
</pre></div>
</div>
<p>Microsoft Visual Studio .NET:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>devenv<span class="w"> </span>ex1.exe
</pre></div>
</div>
<p>Intel Enhanced Debugger:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>edb<span class="w"> </span>ex1.exe
</pre></div>
</div>
<p>or GNU Debugger</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>gdb<span class="w"> </span>ex1.exe
</pre></div>
</div>
</section>
</section>
<section id="notes-on-using-other-systems-besides-cygwin-to-compile-with-microsoft-intel-compilers">
<h3>Notes On Using Other Systems Besides Cygwin To Compile With Microsoft/Intel Compilers<a class="headerlink" href="#notes-on-using-other-systems-besides-cygwin-to-compile-with-microsoft-intel-compilers" title="Permalink to this heading">#</a></h3>
<p>For any alternate system, we would have to redo <code class="docutils literal notranslate"><span class="pre">win32fe</span></code> <a class="footnote-reference brackets" href="#win32" id="id4">1</a> functionality for
that system. This includes:</p>
<ul class="simple">
<li><p>Marshal Unix type compiler options to Cl (Microsoft compiler).</p></li>
<li><p>Convert paths in some of these options from this system (for example Cygwin paths) to
Microsoft Windows paths.</p></li>
<li><p>Have python that works with system path notation.</p></li>
<li><p>Have the ability equivalent to Microsoft Windows process spawning; Cygwin process
spawning produces Microsoft Windows processes. WSL1 lacked this.</p></li>
</ul>
</section>
</section>
<section id="installation-with-msys2-and-mingw-compilers">
<h2>Installation With MSYS2 and MinGW Compilers<a class="headerlink" href="#installation-with-msys2-and-mingw-compilers" title="Permalink to this heading">#</a></h2>
<p>This allows one to build standalone Microsoft Windows libraries and
applications that are compatible with the Microsoft and Intel compilers.</p>
<ol class="arabic">
<li><p>Install MSYS2 and MS-MPI:</p>
<p>Download and install MSYS2 from <a class="reference external" href="https://www.msys2.org">https://www.msys2.org</a>. If you want to use MPI, we recommend you use MS-MPI from <a class="reference external" href="https://learn.microsoft.com/en-us/message-passing-interface/microsoft-mpi">https://learn.microsoft.com/en-us/message-passing-interface/microsoft-mpi</a>.</p>
</li>
<li><p>Update MSYS2 and install base packages:</p>
<p>First, launch a MSYS2 MinGW x64 shell. Double-check this is the proper type of shell by typing</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$  </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$MINGW_PREFIX</span>
<span class="go">/mingw64</span>
</pre></div>
</div>
<p>If you see something else, e.g., <code class="docutils literal notranslate"><span class="pre">/clang64</span></code>, this is not the correct type
of shell, it may still work, but this is less tested. Then, update your
installation using <code class="docutils literal notranslate"><span class="pre">pacman</span></code> (you may be asked to quit and re-open your shell).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$  </span>pacman<span class="w"> </span>-Syu
</pre></div>
</div>
<p>Install the following packages that are needed
by some PETSc dependencies.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$  </span>pacman<span class="w"> </span>-S<span class="w"> </span>autoconf<span class="w"> </span>automake-wrapper<span class="w"> </span>bison<span class="w"> </span>bsdcpio<span class="w"> </span>make<span class="w"> </span>git<span class="w"> </span><span class="se">\</span>
mingw-w64-x86_64-toolchain<span class="w"> </span>patch<span class="w"> </span>python<span class="w"> </span>flex<span class="w"> </span><span class="se">\</span>
pkg-config<span class="w"> </span>pkgfile<span class="w"> </span>tar<span class="w"> </span>unzip<span class="w"> </span>mingw-w64-x86_64-cmake<span class="w"> </span><span class="se">\</span>
mingw-w64-x86_64-msmpi<span class="w"> </span>mingw-w64-x86_64-openblas<span class="w"> </span>mingw-w64-x86_64-jq
</pre></div>
</div>
</li>
<li><p>Configuring:</p>
<p>The two difficulties here are: 1) make sure PETSc configure picks up the proper Python installation, as there are more than one available in a MSYS2 MinGW shell and 2) tell PETSc where is MS-MPI <code class="docutils literal notranslate"><span class="pre">mpiexec</span></code>. We also recommend not to use shared libraries as it is easier to create standalone binaries that way.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$  </span>/usr/bin/python<span class="w"> </span>./configure<span class="w"> </span>--with-mpiexec<span class="o">=</span><span class="s1">&#39;/C/Program\ Files/Microsoft\ MPI/Bin/mpiexec&#39;</span><span class="w"> </span><span class="se">\</span>
--with-shared-libraries<span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
</li>
</ol>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="win32"><span class="brackets">1</span><span class="fn-backref">(<a href="#id1">1</a>,<a href="#id2">2</a>,<a href="#id3">3</a>,<a href="#id4">4</a>)</span></dt>
<dd><p>PETSc win32 front end (<code class="docutils literal notranslate"><span class="pre">win32fe</span></code>): This tool is used as a wrapper to Microsoft
and Intel compilers and associated tools - to enable building PETSc libraries using
Cygwin make and other Unix tools. For additional info, run
<code class="docutils literal notranslate"><span class="pre">${PETSC_DIR}/lib/petsc/bin/win32/win32fe</span></code> without any options.</p>
</dd>
</dl>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="install.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Configuring PETSc</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="multibuild.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Maintaining Your PETSc Installation(s)</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#recommended-installation-methods">
   Recommended Installation Methods
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation-with-microsoft-intel-windows-compilers">
   Installation With Microsoft/Intel Windows Compilers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-configure-usage-with-microsoft-windows-compilers">
     Example Configure Usage With Microsoft Windows Compilers
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-mpi">
       Using MPI
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#external-packages">
       External Packages
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#project-files">
       Project Files
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#debugger">
       Debugger
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#notes-on-using-other-systems-besides-cygwin-to-compile-with-microsoft-intel-compilers">
     Notes On Using Other Systems Besides Cygwin To Compile With Microsoft/Intel Compilers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation-with-msys2-and-mingw-compilers">
   Installation With MSYS2 and MinGW Compilers
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://gitlab.com/petsc/petsc/edit/release/doc/install/windows.rst">
        <i class="fa-solid fa-pencil"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../_sources/install/windows.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 1991-2023, UChicago Argonne, LLC and the PETSc Development Team.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
Last updated on 2023-04-30T09:17:39-0500 (v3.19.1).<br>
</p>
  </div>
  
</div>
  </footer>
  </body>
</html>