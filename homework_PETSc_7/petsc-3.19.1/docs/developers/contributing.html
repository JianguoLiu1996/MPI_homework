
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Contributing to PETSc &#8212; PETSc 3.19.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/katex-math.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script src="../_static/katex.min.js"></script>
    <script src="../_static/auto-render.min.js"></script>
    <script src="../_static/katex_autorenderer.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'developers/contributing';</script>
    <link rel="shortcut icon" href="../_static/petsc_favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PETSc Style and Usage Guide" href="style.html" />
    <link rel="prev" title="Communication Channels for PETSc Developers" href="communication.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
    <img src="../_static/PETSc-TAO_RGB.svg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/PETSc-TAO_RGB_white.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install/index.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manual/index.html">
                        User-Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manualpages/index.html">
                        C/Fortran API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../petsc4py/petsc4py.html">
                        Python API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../faq/index.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../community/index.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Developers
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../miscellaneous/index.html">
                        Misc.
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://gitlab.com/petsc/petsc" title="GitLab" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install/index.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manual/index.html">
                        User-Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manualpages/index.html">
                        C/Fortran API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../petsc4py/petsc4py.html">
                        Python API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../faq/index.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../community/index.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Developers
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../miscellaneous/index.html">
                        Misc.
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://gitlab.com/petsc/petsc" title="GitLab" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="communication.html">Communication Channels for PETSc Developers</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Contributing to PETSc</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">PETSc Style and Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration.html">Getting your code and documentation into PETSc</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">GitLab CI Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="buildsystem.html">BuildSystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">PETSc Testing System</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Developing PETSc Documentation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="design.html">The Design of PETSc</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="kernel.html">The PETSc Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="objects.html">Basic Object Design and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html">How the Solvers Handle User Provided Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="matrices.html">The Various Matrix Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="articles.html">Articles about PETSc Design</a></li>
</ul>
</li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="contributing-to-petsc">
<span id="ch-contributing"></span><h1>Contributing to PETSc<a class="headerlink" href="#contributing-to-petsc" title="Permalink to this heading">#</a></h1>
<p>As you gain experience in building, using, and debugging with PETSc, you
may become able to contribute!</p>
<p>Before contributing code to PETSc, please read the <a class="reference internal" href="style.html"><span class="doc">PETSc Style and Usage Guide</span></a>. You may also
be interested to read about <a class="reference internal" href="design.html"><span class="doc">The Design of PETSc</span></a>.</p>
<p>See <a class="reference internal" href="integration.html"><span class="doc">Getting your code and documentation into PETSc</span></a> for how to submit merge requests. Note that this requires
you to <a class="reference internal" href="#sec-git"><span class="std std-ref">use Git</span></a>.</p>
<p>Once you have gained experience with developing PETSc source code and submitted merge requests, you
can become an active member of our development and push changes directly
to the <a class="reference external" href="https://gitlab.com/petsc/petsc.git">PETSc repository</a>. Send mail to <a class="reference external" href="mailto:petsc-maint&#37;&#52;&#48;mcs&#46;anl&#46;gov">petsc-maint<span>&#64;</span>mcs<span>&#46;</span>anl<span>&#46;</span>gov</a> to
arrange it.</p>
<section id="how-tos">
<h2>How-tos<a class="headerlink" href="#how-tos" title="Permalink to this heading">#</a></h2>
<p>Some of the source code is documented to provide direct examples/templates for common
contributions, adding new implementations for solver components:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://gitlab.com/petsc/petsc/-/blob/main/src/ksp/pc/impls/jacobi/jacobi.c">Add a new PC type</a></p></li>
<li><p><a class="reference external" href="https://gitlab.com/petsc/petsc/-/blob/main/src/ksp/ksp/impls/cg/cg.c.html">Add a new KSP type</a></p></li>
<li><p><a class="reference external" href="https://gitlab.com/petsc/petsc/-/blob/main/src/mat/impls/aij/seq/superlu/superlu.c.html">Add a new subclass of a matrix type (implementation inheritence)</a></p></li>
</ul>
</section>
<section id="documentation-fixes">
<span id="sec-doc-fixes"></span><h2>Documentation fixes<a class="headerlink" href="#documentation-fixes" title="Permalink to this heading">#</a></h2>
<p>We welcome corrections for our <a class="reference internal" href="documentation.html"><span class="doc">documentation</span></a>.</p>
<p>You can supply corrections to many web pages directly by clicking “Edit this page”, on the upper right corner of the page, and
making your edits, following the instructions to make a merge request, and following the <a class="reference internal" href="integration.html"><span class="doc">integration process</span></a>.
Add the label “docs-only”.</p>
<p>You can also submit corrections to <a class="reference external" href="mailto:petsc-maint&#37;&#52;&#48;mcs&#46;anl&#46;gov">petsc-maint<span>&#64;</span>mcs<span>&#46;</span>anl<span>&#46;</span>gov</a> or <a class="reference external" href="https://gitlab.com/petsc/petsc/-/issues">post an issue</a>.</p>
</section>
<section id="browsing-source">
<h2>Browsing Source<a class="headerlink" href="#browsing-source" title="Permalink to this heading">#</a></h2>
<p>One can browse the development repositories at the following location</p>
<blockquote>
<div><p><a class="gitlab reference external" href="https://gitlab.com/petsc/petsc">petsc/petsc</a></p>
</div></blockquote>
</section>
<section id="obtaining-the-development-version-of-petsc">
<h2>Obtaining the development version of PETSc<a class="headerlink" href="#obtaining-the-development-version-of-petsc" title="Permalink to this heading">#</a></h2>
<p><a class="reference external" href="https://git-scm.com/downloads">Install Git</a> if it is not already installed on your machine, then obtain PETSc with the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://gitlab.com/petsc/petsc.git
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>petsc
</pre></div>
</div>
<p>PETSc can now be configured as specified on the
<a class="reference external" href="https://petsc.org/release/install/">Installation page</a></p>
<p>To update your copy of PETSc</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>pull
</pre></div>
</div>
<p>Once updated, you will usually want to rebuild completely</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>reconfigure<span class="w"> </span>all
</pre></div>
</div>
<p>This is a shorthand version of</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">$PETSC_DIR</span>/<span class="nv">$PETSC_ARCH</span>/lib/petsc/conf/reconfigure-<span class="nv">$PETSC_ARCH</span>.py<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>all
</pre></div>
</div>
</section>
<section id="git-instructions">
<span id="sec-git"></span><h2>Git instructions<a class="headerlink" href="#git-instructions" title="Permalink to this heading">#</a></h2>
<p>We provide some information on common operations, here, but to contribute you are expected to know the basics of Git usage, for example from <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">help</span></code>, <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">git</span></code>, or <a class="reference external" href="https://git-scm.com/book/en/">the Git book</a>.</p>
<section id="setting-up-git">
<span id="sec-setup-git"></span><h3>Setting up Git<a class="headerlink" href="#setting-up-git" title="Permalink to this heading">#</a></h3>
<p>First, <a class="reference external" href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup">set up your Git environment</a> to establish your identity.</p>
<p>To stay oriented when working with branches, we encourage configuring
<a class="reference external" href="https://raw.github.com/git/git/master/contrib/completion/git-prompt.sh">git-prompt</a>.</p>
<p>To get tab-completion for Git commands, one can download and then source
<a class="reference external" href="https://raw.github.com/git/git/master/contrib/completion/git-completion.bash">git-completion.bash</a>.</p>
</section>
<section id="starting-a-new-feature-branch">
<span id="sec-developing-a-new-feature"></span><h3>Starting a new feature branch<a class="headerlink" href="#starting-a-new-feature-branch" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Obtain the PETSc source.</p>
<ul>
<li><p>If you have write access to the PETSc <a class="reference external" href="https://gitlab.com/petsc/petsc">GitLab repository</a>, use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">git&#64;gitlab.com/petsc/petsc</span></code>  (or just use a clone you already have).</p></li>
<li><p>Otherwise, <a class="reference external" href="https://gitlab.com/petsc/petsc/-/forks/new">Create a fork</a> (your own copy of the PETSc repository).</p>
<ul>
<li><p>You will be asked to “Select a namespace to fork the project”; click the green “Select” button.</p></li>
<li><p>If you already have a clone on your machine of the PETSc repository you would like to reuse</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>origin<span class="w"> </span>git@gitlab.com:YOURGITLABUSERNAME/petsc.git
</pre></div>
</div>
<p>and otherwise</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>git@gitlab.com:YOURGITLABUSERNAME/petsc.git
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Determine the appropriate <a class="reference internal" href="integration.html#sec-integration-branches"><span class="std std-ref">integration branch</span></a> to start from (usually <code class="docutils literal notranslate"><span class="pre">main</span></code>).</p></li>
<li><p>Create and switch to a new feature branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>fetch
<span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>&lt;loginname&gt;/&lt;affected-package&gt;-&lt;short-description&gt;<span class="w"> </span>origin/main<span class="w">  </span><span class="c1"># or origin/release</span>
</pre></div>
</div>
<p>For example, Barry’s new feature branch on removing CPP in <code class="docutils literal notranslate"><span class="pre">snes/</span></code> will
use</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>barry/snes-removecpp<span class="w"> </span>origin/main<span class="sb">``</span>
</pre></div>
</div>
<p>Use all lowercase and no additional underscores in the branch name.</p>
</li>
<li><p>Write code and tests.</p></li>
<li><p>Inspect changes and stage code using standard Git commands, e.g.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>status
<span class="gp">$ </span>git<span class="w"> </span>add<span class="w"> </span>file1<span class="w"> </span>file2
<span class="gp">$ </span>git<span class="w"> </span>commit
</pre></div>
</div>
</li>
<li><p>Commit code with <a class="reference internal" href="#sec-commit-messages"><span class="std std-ref">good commit messages</span></a>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>commit
</pre></div>
</div>
</li>
<li><p><a class="reference internal" href="#sec-clean-commit-history"><span class="std std-ref">Create a clean commit history</span></a>.</p></li>
<li><p>Push the feature branch to the remote repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>git<span class="w"> </span>push<span class="w"> </span>-u<span class="w"> </span>origin<span class="w"> </span>barry/snes-removecpp
</pre></div>
</div>
</li>
<li><p>Once the branch is ready for submission, see <a class="reference internal" href="integration.html"><span class="doc">Getting your code and documentation into PETSc</span></a>.</p></li>
</ul>
</section>
<section id="writing-commit-messages">
<span id="sec-commit-messages"></span><h3>Writing commit messages<a class="headerlink" href="#writing-commit-messages" title="Permalink to this heading">#</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ComponentName: one-line explanation of commit

After a blank line, write a more detailed explanation of the commit. Many tools do not auto-wrap this part, so wrap paragraph text at a reasonable length. Commit messages are meant for other people to read, possibly months or years later, so describe the rationale for the change in a manner that will make sense later, and which will be provide helpful search terms.

Use the imperative, e.g. &quot;Fix bug&quot;, not &quot;Fixed bug&quot;.

If any interfaces have changed, the commit should fix occurrences in PETSc itself and the message should state its impact on users.

We have defined several standard commit message tags you should use; this makes it easy to search for specific types of contributions. Multiple tags may be used in the same commit message.

/spend 1h or 30m

If other people contributed significantly to a commit, perhaps by reporting bugs or by writing an initial version of the patch, acknowledge them using tags at the end of the commit message.

Reported-by: Helpful User &lt;helpful@example.com&gt;
Based-on-patch-by: Original Idea &lt;original@example.com&gt;
Thanks-to: Incremental Improver &lt;improver@example.com&gt;

If work is done for a particular well defined funding source or project you should label the commit with one or more of the tags

Funded-by: My funding source
Project: My project name
</pre></div>
</div>
</section>
<section id="creating-a-clean-commit-history">
<span id="sec-clean-commit-history"></span><h3>Creating a clean commit history<a class="headerlink" href="#creating-a-clean-commit-history" title="Permalink to this heading">#</a></h3>
<p>Often a branch’s commit history does not present a logical series of changes.
Extra commits from bug-fixes or tiny improvements may accumulate. One commit may contain multiple orthogonal changes. The order of changes may be incorrect. Branches without a clean commit history will often break <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code>.</p>
<p>Ideally, each commit in a submitted branch will allow PETSc to build, compile, and pass its tests, while presenting a small-as-possible set of very closely related changes.
However, especially prioritize rewriting to avoid commits which change the content of previous commits, as this makes reviewing on a per-commit basis difficult.</p>
<p>Use different commits for:</p>
<ul class="simple">
<li><p>fixing formatting and spelling mistakes,</p></li>
<li><p>fixing a bug,</p></li>
<li><p>adding a new feature,</p></li>
<li><p>adding another new feature.</p></li>
</ul>
<p>Rewriting history can be done in <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History">several ways</a>; the easiest is often with the interactive <code class="docutils literal notranslate"><span class="pre">rebase</span></code> command, which allows one to combine (“squash”), rearrange, and edit commits.</p>
<p>It is better to clean up your commits regularly than to wait until you have a large number of them.</p>
<p>For example, if you have made three commits and the most recent two are fixes for the first, you could use</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>rebase<span class="w"> </span>-i<span class="w"> </span>HEAD~3
</pre></div>
</div>
<p>If the branch has already been pushed, the rewritten branch is not compatible with the remote copy of the branch. You must force push your changes with</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>push<span class="w"> </span>-f<span class="w"> </span>origin<span class="w"> </span>branch-name
</pre></div>
</div>
<p>to update the remote branch with your copy. This must be done with extreme care and only if you know someone else has not changed the remote copy of the branch,
otherwise you will lose those changes. Never do a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> after you rebase since that will merge the old branch into your local one and create a mess <a class="footnote-reference brackets" href="#block-ugly-pull-merge" id="id1">2</a>.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> to see the recent changes to your branch and help determine what commits should be rearranged, combined, or split.
You may also find it helpful to use an additional tool such as
<a class="reference external" href="https://git-scm.com/docs/git-gui/">git-gui</a>, <a class="reference external" href="https://github.com/jesseduffield/lazygit">lazygit</a>, or <a class="reference external" href="https://git-scm.com/downloads/guis">various GUI tools</a>.</p>
</section>
<section id="rebasing-your-branch">
<span id="sec-rebasing"></span><h3>Rebasing your branch<a class="headerlink" href="#rebasing-your-branch" title="Permalink to this heading">#</a></h3>
<p>You may also want to <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Branching-Rebasing">rebase</a> your branch onto to the latest version of an <a class="reference internal" href="integration.html#sec-integration-branches"><span class="std std-ref">integration branch</span></a> <a class="footnote-reference brackets" href="#rebase-not-merge-upstream" id="id2">1</a>, if the integration branch has had relevant changes since you started working on your feature branch.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>fetch<span class="w"> </span>origin<span class="w">                              </span><span class="c1"># assume origin --&gt; PETSc upstream</span>
<span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>myname/component-feature
<span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>myname/component-feature-backup-1<span class="w">  </span><span class="c1"># optional</span>
<span class="gp">$ </span>git<span class="w"> </span>rebase<span class="w"> </span>origin/main<span class="w">                        </span><span class="c1"># or origin/release</span>
</pre></div>
</div>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="rebase-not-merge-upstream"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>Rebasing is generally preferable to <a class="reference external" href="http://yarchive.net/comp/linux/git_merges_from_upstream.html">merging an upstream branch</a>.</p>
</dd>
<dt class="label" id="block-ugly-pull-merge"><span class="brackets"><a class="fn-backref" href="#id1">2</a></span></dt>
<dd><p>You may wish to <a class="reference external" href="https://git-scm.com/docs/git-config#Documentation/git-config.txt-pullff">make it impossible to perform these usually-undesired “non fast-forward” merges when pulling</a>, with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">pull.ff</span> <span class="pre">only</span></code>.</p>
</dd>
</dl>
</section>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="communication.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Communication Channels for PETSc Developers</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="style.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">PETSc Style and Usage Guide</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-tos">
   How-tos
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#documentation-fixes">
   Documentation fixes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#browsing-source">
   Browsing Source
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#obtaining-the-development-version-of-petsc">
   Obtaining the development version of PETSc
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#git-instructions">
   Git instructions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#setting-up-git">
     Setting up Git
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#starting-a-new-feature-branch">
     Starting a new feature branch
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#writing-commit-messages">
     Writing commit messages
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-clean-commit-history">
     Creating a clean commit history
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rebasing-your-branch">
     Rebasing your branch
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://gitlab.com/petsc/petsc/edit/release/doc/developers/contributing.rst">
        <i class="fa-solid fa-pencil"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../_sources/developers/contributing.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 1991-2023, UChicago Argonne, LLC and the PETSc Development Team.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
Last updated on 2023-04-30T09:17:39-0500 (v3.19.1).<br>
</p>
  </div>
  
</div>
  </footer>
  </body>
</html>