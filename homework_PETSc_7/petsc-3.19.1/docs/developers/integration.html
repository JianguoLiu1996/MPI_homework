
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Getting your code and documentation into PETSc &#8212; PETSc 3.19.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/katex-math.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script src="../_static/katex.min.js"></script>
    <script src="../_static/auto-render.min.js"></script>
    <script src="../_static/katex_autorenderer.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'developers/integration';</script>
    <link rel="shortcut icon" href="../_static/petsc_favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GitLab CI Pipelines" href="pipelines.html" />
    <link rel="prev" title="PETSc Style and Usage Guide" href="style.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
    <img src="../_static/PETSc-TAO_RGB.svg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/PETSc-TAO_RGB_white.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install/index.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manual/index.html">
                        User-Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manualpages/index.html">
                        C/Fortran API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../petsc4py/petsc4py.html">
                        Python API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../faq/index.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../community/index.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Developers
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../miscellaneous/index.html">
                        Misc.
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://gitlab.com/petsc/petsc" title="GitLab" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install/index.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manual/index.html">
                        User-Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manualpages/index.html">
                        C/Fortran API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../petsc4py/petsc4py.html">
                        Python API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../faq/index.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../community/index.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Developers
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../miscellaneous/index.html">
                        Misc.
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://gitlab.com/petsc/petsc" title="GitLab" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="communication.html">Communication Channels for PETSc Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to PETSc</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">PETSc Style and Usage Guide</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Getting your code and documentation into PETSc</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">GitLab CI Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="buildsystem.html">BuildSystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">PETSc Testing System</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Developing PETSc Documentation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="design.html">The Design of PETSc</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="kernel.html">The PETSc Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="objects.html">Basic Object Design and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html">How the Solvers Handle User Provided Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="matrices.html">The Various Matrix Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="articles.html">Articles about PETSc Design</a></li>
</ul>
</li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="getting-your-code-and-documentation-into-petsc">
<h1>Getting your code and documentation into PETSc<a class="headerlink" href="#getting-your-code-and-documentation-into-petsc" title="Permalink to this heading">#</a></h1>
<p>PETSc uses <a class="reference external" href="https://git-scm.com/">git</a>, <a class="reference external" href="https://gitlab.com/petsc/petsc">GitLab</a>,
and its testing system, for its source code management.
All new code in PETSc is accepted via merge requests (MRs).</p>
<p>By submitting code, the contributor gives irretrievable consent to the
redistribution and/or modification of the contributed source code as
described in the <a class="reference external" href="https://gitlab.com/petsc/petsc/-/blob/main/CONTRIBUTING">PETSc open source license</a>.</p>
<section id="integration-branches">
<span id="sec-integration-branches"></span><h2>Integration branches<a class="headerlink" href="#integration-branches" title="Permalink to this heading">#</a></h2>
<section id="release">
<span id="sec-release-branch"></span><h3><code class="docutils literal notranslate"><span class="pre">release</span></code><a class="headerlink" href="#release" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">release</span></code> branch contains the latest PETSc release including bug-fixes.</p>
<p>Bug-fixes, along with most <a class="reference internal" href="#sec-docs-only-mrs"><span class="std std-ref">documentation fixes</span></a>, should start from <code class="docutils literal notranslate"><span class="pre">release</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>fetch
<span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>yourname/fix-component-name<span class="w"> </span>origin/release
</pre></div>
</div>
<p>Bug-fix updates, about every month, (e.g. 3.17.1) are tagged on <code class="docutils literal notranslate"><span class="pre">release</span></code> (e.g. v3.17.1).</p>
</section>
<section id="main">
<span id="sec-main-branch"></span><h3><code class="docutils literal notranslate"><span class="pre">main</span></code><a class="headerlink" href="#main" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">main</span></code> branch contains everything in the release branch as well as new features that have passed all testing
and will be in the next release (e.g. version 3.18). Users developing software based
on recently-added features in PETSc should follow <code class="docutils literal notranslate"><span class="pre">main</span></code>.</p>
<p>New feature branches <a class="reference internal" href="contributing.html#sec-developing-a-new-feature"><span class="std std-ref">should start</span></a> from <code class="docutils literal notranslate"><span class="pre">main</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>fetch
<span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>yourname/fix-component-name<span class="w"> </span>origin/main
</pre></div>
</div>
</section>
</section>
<section id="before-filing-an-mr">
<h2>Before filing an MR<a class="headerlink" href="#before-filing-an-mr" title="Permalink to this heading">#</a></h2>
<ul>
<li><p>Read the <a class="reference internal" href="style.html"><span class="doc">PETSc Style and Usage Guide</span></a>.</p></li>
<li><p><a class="reference internal" href="contributing.html#sec-setup-git"><span class="std std-ref">Set up your git environment</span></a>.</p></li>
<li><p>Start a new branch and make your changes. Only use a GitLab (public) fork of PETSc if you do not have
developer (write access) to the PETSc GitLab repository.</p></li>
<li><p>If your contribution can be logically decomposed into 2 or more
separate contributions, submit them in sequence with different
branches and merge requests instead of all at once.</p></li>
<li><p>Include <a class="reference internal" href="testing.html"><span class="doc">tests</span></a> which cover any changes to the source code.</p></li>
<li><p><a class="reference internal" href="../manual/tests.html#sec-runningtests"><span class="std std-ref">Run the full test suite</span></a> on your machine.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>alltests<span class="w"> </span><span class="nv">TIMEOUT</span><span class="o">=</span><span class="m">600</span>
</pre></div>
</div>
</li>
<li><p>Run the source checkers on your machine.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>checkbadSource
<span class="gp">$ </span>make<span class="w"> </span>clangformat
<span class="gp">$ </span>make<span class="w"> </span>lint
</pre></div>
</div>
</li>
<li><p><a class="reference internal" href="contributing.html#sec-clean-commit-history"><span class="std std-ref">Create a clean commit history</span></a>, ensuring that the commits on your branch present a logical picture of your new development.</p></li>
</ul>
</section>
<section id="submitting-an-mr">
<h2>Submitting an MR<a class="headerlink" href="#submitting-an-mr" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> prints a URL that directly starts a merge request.
Alternatively, use <a class="reference external" href="https://docs.gitlab.com/ee/user/project/merge_requests/creating_merge_requests.html">GitLab’s web interface</a>.</p>
<ul class="simple">
<li><p>The default target branch is <code class="docutils literal notranslate"><span class="pre">main</span></code>; if your branch started from <code class="docutils literal notranslate"><span class="pre">release</span></code>, select that as the target branch.</p></li>
<li><p>If the merge request resolves an outstanding <a class="reference external" href="https://gitlab.com/petsc/petsc/issues">issue</a>,
include a <a class="reference external" href="https://docs.gitlab.com/ee/user/project/issues/managing_issues.html#default-closing-pattern">closing pattern</a>
such as <code class="docutils literal notranslate"><span class="pre">Closes</span> <span class="pre">#123</span></code> in the MR’s description to automatically have the issue closed when the MR is merged <a class="footnote-reference brackets" href="#closing-patterns-release" id="id1">1</a> .</p></li>
</ul>
<p>If you have developer access (that is you are not contributing from a fork):</p>
<ul class="simple">
<li><p>Select appropriate <a class="reference external" href="https://gitlab.com/petsc/petsc/-/labels">labels</a> including a <a class="reference internal" href="#sec-workflow-labels"><span class="std std-ref">workflow label</span></a>.</p></li>
<li><p>Assign yourself to the MR.</p></li>
<li><p>Select reviewers for the MR; clicking on <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">Approval</span> <span class="pre">Rules</span></code> will list appropriate reviewers.</p></li>
<li><p>If the branch started from <code class="docutils literal notranslate"><span class="pre">release</span></code> select the <code class="docutils literal notranslate"><span class="pre">milestone</span></code> of <code class="docutils literal notranslate"><span class="pre">Vxx.yy-release-fixes</span></code></p></li>
<li><p>If appropriate, once the MR has been submitted, refresh the browser and then select Pipelines to examine and run testing, see <a class="reference internal" href="pipelines.html"><span class="doc">GitLab CI Pipelines</span></a>.</p></li>
</ul>
<p>For MRs from forks:</p>
<ul class="simple">
<li><p>Make sure the fork is not private - as gitlab merge request process does not work well (wrt pipelines, merges) with a private fork.</p></li>
<li><p>Select the correct target repository <code class="docutils literal notranslate"><span class="pre">petsc/petsc</span></code> along with the target branch.</p></li>
<li><p>GitLab does not allow you to set labels so  <cite>&#64;</cite>-mention one of the developers in a comment so that they can assign someone to the MR to add labels, run pipelines, and generally assist with the MR. Both the submitter and the this assignee should be listed in the upper right corner as an assigned to the MR.</p></li>
</ul>
<section id="docs-only-mrs">
<span id="sec-docs-only-mrs"></span><h3>Docs-only MRs<a class="headerlink" href="#docs-only-mrs" title="Permalink to this heading">#</a></h3>
<p>For changes only to documentation, add the <code class="docutils literal notranslate"><span class="pre">docs-only</span></code> label, which will
trigger a modified pipeline to automatically build a preview of the documentation.
Any warnings from Sphinx will cause the pipeline to fail. Once completed, click “View App” which is to the right side in the middle of the MR page.</p>
<p>Documentation changes should be made to the <a class="reference internal" href="#sec-release-branch"><span class="std std-ref">release branch</span></a>
in the typical case that they apply to the release version of PETSc (including changes for the website).
Changes related only to new features in the <a class="reference internal" href="#sec-main-branch"><span class="std std-ref">main branch</span></a> should be applied there.</p>
</section>
</section>
<section id="mr-reviewing">
<span id="sec-mr-reviewing"></span><h2>MR reviewing<a class="headerlink" href="#mr-reviewing" title="Permalink to this heading">#</a></h2>
<p>Once the MR has passed the pipeline, it is ready for review.
The submitter/assignee must change the <a class="reference internal" href="#sec-workflow-labels"><span class="std std-ref">workflow label</span></a> to <code class="docutils literal notranslate"><span class="pre">workflow::Review</span></code>.</p>
<p>It is the <strong>submitter/assigner’s</strong> responsibility to track the progress of the MR
and ensure it gets merged.</p>
<p>If the pipeline detects problems it is the <strong>submitter/assignee’s</strong>
responsibility to fix the errors.</p>
<p>Reviewers comment on the MR, either</p>
<ul class="simple">
<li><p>by clicking on the left end of a specific line in the changes. A useful feature is the <a class="reference external" href="https://docs.gitlab.com/ee/user/project/merge_requests/reviews/suggestions.html">“insert suggestion”</a> button in the comment box, to suggest an exact replacement on a line or several adjacent lines.</p></li>
<li><p>or in the overview if it is a general comment.  When introducing a new topic (thread) in reviewing an MR, one should submit with “Start Review” and not “Comment”.</p></li>
</ul>
<p>Gitlab MRs use “threads” to track discussions.
When responding to a thread make sure to use the “Reply” box for that
thread; do not introduce a new thread or a comment.</p>
<p>The <strong>submitter/assignee</strong> must mark threads as resolved when they fix the related
problem.</p>
<p>Often, the submitter/assignee will need to update their branch in response to these comments,
and re-run the pipeline.</p>
<p>If the <strong>submitter/assignee</strong> feels the MR is not getting reviewed in a timely
manner they may assign additional reviewers to the MR and request in the discussion these same people to review by &#64;-mentioning them.</p>
<p>When reviewers believe an MR is ready to be merged, they approve it.
You can determine who must approve your MR by clicking on the “View eligible reviewers” towards the top of the “Overview” page.</p>
<p>When the merge has been approved by a sufficient number of reviewers, the pipeline passes, new commits have been <a class="reference internal" href="contributing.html#sec-clean-commit-history"><span class="std std-ref">properly rearranged</span></a> if needed, and all threads have been resolved,
the <strong>submitter/assignee</strong> must set the label to  <a class="reference internal" href="#sec-workflow-labels"><span class="std std-ref">workflow::Ready-For-Merge</span></a>.
An integrator will then merge the MR.</p>
</section>
<section id="workflow-labels">
<span id="sec-workflow-labels"></span><h2>Workflow labels<a class="headerlink" href="#workflow-labels" title="Permalink to this heading">#</a></h2>
<p>The MR process, including testing and reviewing, is managed by <a class="reference external" href="https://gitlab.com/petsc/petsc/-/labels?subscribed=&amp;search=workflow%3A%3A">the workflow labels</a> that indicate the state of the MR. Every MR should have exactly one of these labels.</p>
<p>The standard workflow has three steps.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">workflow::Pipeline-Testing</span></code> The user is testing their branch. Generally, unless asked, no one else has a reason to look at such an MR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">workflow::Review</span></code> The user would like their branch reviewed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">workflow::Ready-For-Merge</span></code> The MR has passed all tests, passed the review, has no outstanding threads, and has a <a class="reference internal" href="contributing.html#sec-clean-commit-history"><span class="std std-ref">clean commit history</span></a>.</p></li>
</ul>
<p>The submitter/assignee of the MR is responsible for changing the <code class="docutils literal notranslate"><span class="pre">workflow</span></code> label  appropriately during the MR process.</p>
<p>Some MRs may begin with either of the following <code class="docutils literal notranslate"><span class="pre">workflow</span></code> states.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">workflow::Request-For-Comment</span></code> The branch is not being requested to be merged but the user would like feedback on the branch. You do not need to test the code in this state.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">workflow::In-Development</span></code> The developer is working on the branch. Other developers not involved in the branch have generally no reason to look at these MRs.</p></li>
</ul>
<p>Both of these should also be marked as “Draft” on the MR page.
These two states are usually eventually converted by the developer to <code class="docutils literal notranslate"><span class="pre">workflow::Review</span></code>.</p>
<p>You can run the pipelines on an MR in any workflow state.</p>
</section>
<section id="merge-request-management">
<h2>Merge request management<a class="headerlink" href="#merge-request-management" title="Permalink to this heading">#</a></h2>
<p>At any given time, at least one of the <a class="reference internal" href="../community/petsc_team.html#sec-core-developers"><span class="std std-ref">Current Core Developers</span></a> is an
“MR Shepherd” and ensures that open merge
requests progress through the <a class="reference internal" href="#sec-mr-reviewing"><span class="std std-ref">review process</span></a>,
examining open merge requests and taking appropriate action.</p>
<table class="colwidths-given docutils align-left" id="id2">
<caption><span class="caption-number">Table 20 </span><span class="caption-text">MR Shepherd Checks</span><a class="headerlink" href="#id2" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>MR State</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Missing a <a class="reference internal" href="#sec-workflow-labels"><span class="std std-ref">workflow label</span></a> and other labels</p></td>
<td><p>Add an appropriate label, or label <code class="docutils literal notranslate"><span class="pre">workflow::Waiting-on-Submitter</span></code> and ask the submitter/assignee to update</p></td>
</tr>
<tr class="row-odd"><td><p>Without an assignee</p></td>
<td><p>Assign the submitter (if the MR is from a fork also list an appropriate developer)</p></td>
</tr>
<tr class="row-even"><td><p>Without reviewers</p></td>
<td><p>Assign reviewers</p></td>
</tr>
</tbody>
</table>
<p>If MRs are inactive for too long, remind the submitter/assignee, reviewer(s), or integrator(s) of actions to take.
If the submitter/assignee must take action, change the label to <code class="docutils literal notranslate"><span class="pre">workflow::Waiting-on-Submitter</span></code>.</p>
<table class="colwidths-given docutils align-left" id="id3">
<caption><span class="caption-number">Table 21 </span><span class="caption-text">MR Inactivity Thresholds</span><a class="headerlink" href="#id3" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>MR state</p></th>
<th class="head"><p>Inactivity threshold</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">workflow:Pipeline-Testing</span></code></p></td>
<td><p>One week</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">workflow::Review</span></code></p></td>
<td><p>One week</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">workflow::Ready-for-Merge</span></code></p></td>
<td><p>One week</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">workflow::Waiting-on-Submitter</span></code></p></td>
<td><p>One month</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">workflow::Request-for-Comment</span></code></p></td>
<td><p>One month</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">workflow::Requires-Discussion</span></code></p></td>
<td><p>One month</p></td>
</tr>
<tr class="row-even"><td><p>All others</p></td>
<td><p>One year</p></td>
</tr>
</tbody>
</table>
<p>If a submitter has been unresponsive for a year,
close the MR, label <code class="docutils literal notranslate"><span class="pre">workflow::Inactive-closed</span></code>,
and let the submitter know that they may reopen if desired.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="closing-patterns-release"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Unfortunately, these closing patterns <a class="reference external" href="https://gitlab.com/gitlab-org/gitlab/-/issues/14289">only work for MRs to a single default branch</a> (<code class="docutils literal notranslate"><span class="pre">main</span></code>), so you must manually close related issues for MRs to <code class="docutils literal notranslate"><span class="pre">release</span></code>.</p>
</dd>
</dl>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="style.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">PETSc Style and Usage Guide</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="pipelines.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">GitLab CI Pipelines</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#integration-branches">
   Integration branches
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#release">
     <code class="docutils literal notranslate">
      <span class="pre">
       release
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#main">
     <code class="docutils literal notranslate">
      <span class="pre">
       main
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#before-filing-an-mr">
   Before filing an MR
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submitting-an-mr">
   Submitting an MR
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#docs-only-mrs">
     Docs-only MRs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mr-reviewing">
   MR reviewing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#workflow-labels">
   Workflow labels
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#merge-request-management">
   Merge request management
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://gitlab.com/petsc/petsc/edit/release/doc/developers/integration.rst">
        <i class="fa-solid fa-pencil"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../_sources/developers/integration.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 1991-2023, UChicago Argonne, LLC and the PETSc Development Team.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
Last updated on 2023-04-30T09:17:39-0500 (v3.19.1).<br>
</p>
  </div>
  
</div>
  </footer>
  </body>
</html>