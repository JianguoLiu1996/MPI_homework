
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Developing PETSc Documentation &#8212; PETSc 3.19.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/katex-math.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script src="../_static/katex.min.js"></script>
    <script src="../_static/auto-render.min.js"></script>
    <script src="../_static/katex_autorenderer.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'developers/documentation';</script>
    <link rel="shortcut icon" href="../_static/petsc_favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="The Design of PETSc" href="design.html" />
    <link rel="prev" title="PETSc Testing System" href="testing.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
    <img src="../_static/PETSc-TAO_RGB.svg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/PETSc-TAO_RGB_white.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install/index.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manual/index.html">
                        User-Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manualpages/index.html">
                        C/Fortran API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../petsc4py/petsc4py.html">
                        Python API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../faq/index.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../community/index.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Developers
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../miscellaneous/index.html">
                        Misc.
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://gitlab.com/petsc/petsc" title="GitLab" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../overview/index.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../install/index.html">
                        Install
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../tutorials/index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manual/index.html">
                        User-Guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../manualpages/index.html">
                        C/Fortran API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../petsc4py/petsc4py.html">
                        Python API
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../faq/index.html">
                        FAQ
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../community/index.html">
                        Community
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Developers
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../miscellaneous/index.html">
                        Misc.
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://gitlab.com/petsc/petsc" title="GitLab" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="communication.html">Communication Channels for PETSc Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to PETSc</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">PETSc Style and Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration.html">Getting your code and documentation into PETSc</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">GitLab CI Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="buildsystem.html">BuildSystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">PETSc Testing System</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Developing PETSc Documentation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="design.html">The Design of PETSc</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="kernel.html">The PETSc Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="objects.html">Basic Object Design and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html">How the Solvers Handle User Provided Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="matrices.html">The Various Matrix Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="articles.html">Articles about PETSc Design</a></li>
</ul>
</li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="developing-petsc-documentation">
<h1>Developing PETSc Documentation<a class="headerlink" href="#developing-petsc-documentation" title="Permalink to this heading">#</a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="general-guidelines">
<h2>General Guidelines<a class="headerlink" href="#general-guidelines" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Good documentation should be like a bonsai tree: alive, on display, frequently tended, and as small as possible (adapted from <a class="reference external" href="https://github.com/google/styleguide/blob/gh-pages/docguide/best_practices.md">these best practices</a>).</p></li>
<li><p>Wrong, irrelevant, or confusing documentation is worse than no documentation.</p></li>
</ul>
</section>
<section id="documentation-with-sphinx">
<span id="sphinx-documentation"></span><h2>Documentation with Sphinx<a class="headerlink" href="#documentation-with-sphinx" title="Permalink to this heading">#</a></h2>
<p>We use <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a> to build our web page and documentation.  Most content is written using <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html">reStructuredText</a>, a simple markup language.</p>
<p><a class="reference external" href="https://gitlab.com/psanan/petsc-sphinx-slides">These slides</a> contain an overview of Sphinx and how we use(d) it, as of October, 2020.</p>
<section id="building-the-html-docs-locally">
<span id="sec-local-html-docs"></span><h3>Building the HTML docs locally<a class="headerlink" href="#building-the-html-docs-locally" title="Permalink to this heading">#</a></h3>
<p>We use a a <a class="reference external" href="https://docs.python.org/3/tutorial/venv.html">Python 3 virtual environment</a>  <a class="footnote-reference brackets" href="#venv-footnote" id="id1">1</a> to build the documentation since not all developers can trivially install the needed Python modules directly.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$PETSC_DIR</span>
<span class="gp">$ </span>make<span class="w"> </span>docs
</pre></div>
</div>
<p>or</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$PETSC_DIR</span>/doc
<span class="gp">$ </span>make<span class="w"> </span>sphinxhtml
<span class="gp">$ </span>open<span class="w"> </span>_build/html/index.html
</pre></div>
</div>
</section>
<section id="building-the-manual-locally-as-a-pdf-via-latex">
<span id="sec-local-docs-latex"></span><h3>Building the manual locally as a PDF via LaTeX<a class="headerlink" href="#building-the-manual-locally-as-a-pdf-via-latex" title="Permalink to this heading">#</a></h3>
<div class="admonition-note admonition">
<p class="admonition-title">Note</p>
<p>Before following these instructions, you need to have a working
local LaTeX installation and the ability to install additional packages,
if need be, to resolve LaTeX errors.</p>
</div>
<p>Set up your local Python environment (e.g. <a class="reference internal" href="#sec-local-html-docs"><span class="std std-ref">as above</span></a>), then</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>doc
<span class="gp">$ </span>make<span class="w"> </span>sphinxpdf
<span class="gp">$ </span>open<span class="w"> </span>_build/latex/manual.pdf<span class="w">  </span><span class="c1"># or otherwise open in PDF viewer</span>
</pre></div>
</div>
</section>
<section id="sphinx-documentation-guidelines">
<span id="sphinx-guidelines"></span><h3>Sphinx Documentation Guidelines<a class="headerlink" href="#sphinx-documentation-guidelines" title="Permalink to this heading">#</a></h3>
<p>Refer to Sphinx’s <a class="reference external" href="https://https://www.sphinx-doc.org">own documentation</a> for general information on how to use Sphinx, and note the following additional guidelines.</p>
<ul>
<li><p>Use the <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#directive-literalinclude">literalinclude directive</a> to directly include pieces of source code. Use an “absolute” path, beginning with <code class="docutils literal notranslate"><span class="pre">/</span></code>, which means relative to the root for the Sphinx docs (where <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> is found).</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">literalinclude</span><span class="p">::</span> /../src/sys/error/err.c
   <span class="nc">:start-at:</span> <a href="PETSC_DOC_OUT_ROOT_PLACEHOLDER/manualpages/Sys/PetscErrorCode.html">PetscErrorCode</a> <a href="PETSC_DOC_OUT_ROOT_PLACEHOLDER/manualpages/Sys/PetscError.html">PetscError</a>(
   <span class="nc">:end-at:</span> <a href="PETSC_DOC_OUT_ROOT_PLACEHOLDER/manualpages/Sys/PetscFunctionReturn.html">PetscFunctionReturn</a>(<a href="PETSC_DOC_OUT_ROOT_PLACEHOLDER/manualpages/Sys/PetscErrorCode.html">PETSC_SUCCESS</a>)
   <span class="nc">:append:</span> }
</pre></div>
</div>
<p>For robustness to changes in the source files, Use <code class="docutils literal notranslate"><span class="pre">:start-at:</span></code> and related options when possible, noting that you can also use (positive) values of <code class="docutils literal notranslate"><span class="pre">:lines:</span></code> relative to this. For languages other than C, use the <code class="docutils literal notranslate"><span class="pre">:language:</span></code> option to appropriately highlight.</p>
</li>
<li><p>Any invocable command line statements longer than a few words should be in
<code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">code-block::</span></code> sections. Any such statements not in code-block statements must be
enclosed by double backticks “``”. For example <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">all</span></code> is acceptable but</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span><span class="nv">PETSC_DIR</span><span class="o">=</span>/my/path/to/petsc<span class="w"> </span><span class="nv">PETSC_ARCH</span><span class="o">=</span>my-petsc-arch<span class="w"> </span>all
</pre></div>
</div>
<p>should be in a block.</p>
</li>
<li><p>All code blocks showing invocation of command line must use the “console” block
directive. E.g.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">console</span>

   <span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$PETSC_DIR</span>/src/snes/interface
   <span class="gp">$ </span>./someprog
   <span class="go">output1</span>
   <span class="go">output2</span>
</pre></div>
</div>
<p>The only exception of this is when displaying raw output, i.e. with no preceding
commands. Then one may use just the “::” directive to improve visibility E.g.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="se">::</span>

<span class="s">   output1</span>
<span class="s">   output2</span>
</pre></div>
</div>
</li>
<li><p>Any code blocks that show command line invocations must be preceded by <code class="docutils literal notranslate"><span class="pre">$</span></code>, e.g.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">code-block</span><span class="p">::</span> <span class="k">console</span>

   <span class="gp">$ </span>./configure<span class="w"> </span>--some-args
   <span class="gp">$ </span>make<span class="w"> </span>libs
   <span class="gp">$ </span>make<span class="w"> </span>./ex1
   <span class="gp">$ </span>./ex1<span class="w"> </span>--some-args
</pre></div>
</div>
</li>
<li><p>Environment variables such as <code class="docutils literal notranslate"><span class="pre">$PETSC_DIR</span></code> or <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> must be preceded by
<code class="docutils literal notranslate"><span class="pre">$</span></code> and be enclosed in double backticks, e.g.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>Set <span class="s">``$PETSC_DIR``</span> and <span class="s">``$PETSC_ARCH``</span>
</pre></div>
</div>
</li>
<li><p>For internal links, use explicit labels, e.g</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="nt">_sec_short_name:</span>

<span class="gh">Section name</span>
<span class="gh">============</span>
</pre></div>
</div>
<p>and elsewhere (in any document),</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>See <span class="na">:ref:</span><span class="nv">`link text &lt;sec_short_name&gt;`</span>
</pre></div>
</div>
</li>
<li><p>For internal links in the manual with targets outside the manual, always provide alt text
so that the text will be  properly formatted in the <a class="reference internal" href="#sec-local-docs-latex"><span class="std std-ref">standalone PDF manual</span></a>, e.g.</p>
<blockquote>
<div><div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>PETSc has <span class="na">:doc:</span><span class="nv">`mailing lists &lt;/community/mailing&gt;`</span>.
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>We use the <a class="reference external" href="https://sphinxcontrib-bibtex.readthedocs.io/en/latest/">sphinxcontrib-bibtex extension</a>
to include citations from BibTeX files.
You must include <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">bibliography::</span></code> blocks at the bottom of a page including citations (<a class="reference external" href="https://gitlab.com/petsc/petsc/-/raw/main/doc/manual/ksp.rst">example</a>).
To cite the same reference in more than one page, use <a class="reference external" href="https://sphinxcontrib-bibtex.readthedocs.io/en/latest/usage.html#key-prefixing">this workaround</a> on one of them (<a class="reference external" href="https://gitlab.com/petsc/petsc/-/raw/main/doc/developers/articles.rst">example</a>) <a class="footnote-reference brackets" href="#bibtex-footnote" id="id2">2</a>.</p></li>
<li><p>See special instructions on <a class="reference internal" href="#docs-images"><span class="std std-ref">Images</span></a>.</p></li>
<li><p>Prefer formatting styles that are easy to modify and maintain.  In particular, use of <a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/directives.html#list-table">list-table</a> is recommended.</p></li>
<li><p>When using external links with inline URLs, prefer to use <a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#anonymous-hyperlinks">anonymous hyperlink references</a> with two trailing underscores, e.g.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="s">`link text </span><span class="si">&lt;https://external.org&gt;</span><span class="s">`__</span>
</pre></div>
</div>
</li>
<li><p>To pluralize something with inline markup, e.g. <code class="docutils literal notranslate"><span class="pre"><a href="PETSC_DOC_OUT_ROOT_PLACEHOLDER/manualpages/DM/DM.html">DM</a></span></code>s, escape the trailing character to avoid <code class="docutils literal notranslate"><span class="pre">WARNING:</span> <span class="pre">Inline</span> <span class="pre">literal</span> <span class="pre">start-string</span> <span class="pre">without</span> <span class="pre">end-string</span></code>.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="s">``<a href="PETSC_DOC_OUT_ROOT_PLACEHOLDER/manualpages/DM/DM.html">DM</a>``\s</span>
</pre></div>
</div>
</li>
<li><p>Use restraint in adding new Sphinx extensions, in particular those which aren’t
widely-used and well-supported, or those with hidden system dependencies.</p></li>
</ul>
</section>
</section>
<section id="images">
<span id="docs-images"></span><h2>Images<a class="headerlink" href="#images" title="Permalink to this heading">#</a></h2>
<p>PETSc’s documentation is tightly coupled to the source code and tests, and
is tracked in the primary PETSc Git repository. However, image files are
too large to directly track this way (especially because they persist in the integration branches’ histories).</p>
<p>Therefore, we store image files in a separate git repository and clone it when
needed. Any new images required must be added to the currently-used branch of this repository.</p>
<section id="image-guidelines">
<h3>Image Guidelines<a class="headerlink" href="#image-guidelines" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Whenever possible, use SVG files.  SVG is a web-friendly vector format and will be automatically converted to PDF using <code class="docutils literal notranslate"><span class="pre">rsvg-convert</span></code> <a class="footnote-reference brackets" href="#svg-footnote" id="id3">3</a></p></li>
<li><p>Avoid large files and large numbers of images.</p></li>
<li><p>Do not add movies or other non-image files.</p></li>
</ul>
</section>
<section id="adding-new-images">
<h3>Adding new images<a class="headerlink" href="#adding-new-images" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Note the URL and currently-used branch (after <code class="docutils literal notranslate"><span class="pre">-b</span></code>) for the upstream images repository, as used by the documentation build:</p></li>
</ul>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="w">	</span>git<span class="w"> </span>clone<span class="w"> </span>https://gitlab.com/petsc/images.git<span class="w"> </span>-b<span class="w"> </span>main-2<span class="w"> </span>--depth<span class="o">=</span><span class="m">1</span><span class="w"> </span>images
</pre></div>
</div>
<ul class="simple">
<li><p>Decide where in <code class="docutils literal notranslate"><span class="pre">doc/images</span></code> a new image should go. Use the structure of the <code class="docutils literal notranslate"><span class="pre">doc/</span></code> tree itself as a guide.</p></li>
<li><p>Create a Merge Request to the currently-used branch of the upstream images repository, adding this image <a class="footnote-reference brackets" href="#maintainer-fast-image-footnote" id="id4">4</a>.</p></li>
<li><p>Once this Merge Request is merged, you may make a <a class="reference internal" href="integration.html"><span class="doc">Merge Request to the primary PETSc repository</span></a>, relying on the new image(s).</p></li>
</ul>
<p>It may be helpful to place working copies of new image(s) in your local <code class="docutils literal notranslate"><span class="pre">doc/images</span></code>
while iterating on documentation; just don’t forget to update the upstream images repository.</p>
</section>
<section id="removing-renaming-moving-or-updating-images">
<h3>Removing, renaming, moving or updating images<a class="headerlink" href="#removing-renaming-moving-or-updating-images" title="Permalink to this heading">#</a></h3>
<p>Do not directly move, rename, or update images in the images repository.
Simply add a logically-numbered new version of the image.</p>
<p>If an image is not used in <em>any</em> <a class="reference internal" href="integration.html#sec-integration-branches"><span class="std std-ref">integration branch</span></a> (<code class="docutils literal notranslate"><span class="pre">main</span></code> or <code class="docutils literal notranslate"><span class="pre">release</span></code>),
add it to the the top-level list of files to delete, in the images repository.</p>
</section>
<section id="cleaning-up-the-images-repository-maintainers-only">
<span id="docs-images-cleanup"></span><h3>Cleaning up the images repository (maintainers only)<a class="headerlink" href="#cleaning-up-the-images-repository-maintainers-only" title="Permalink to this heading">#</a></h3>
<p>If the size of the image repository grows too large,</p>
<ul class="simple">
<li><p>Create a new branch <code class="docutils literal notranslate"><span class="pre">main-X</span></code>, where <code class="docutils literal notranslate"><span class="pre">X</span></code> increments the current value</p></li>
<li><p>Create a new commit deleting all files in the to-delete list and clearing the list</p></li>
<li><p>Reset the new <code class="docutils literal notranslate"><span class="pre">main-X</span></code> to a single commit with this new, cleaned-up state</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">main-X</span></code> as the “default” branch on GitLab (or wherever it is hosted).</p></li>
<li><p>Update both <code class="docutils literal notranslate"><span class="pre">release</span></code> and <code class="docutils literal notranslate"><span class="pre">main</span></code> in the primary PETSc repository to clone this new branch</p></li>
</ul>
</section>
</section>
<section id="building-classic-documentation">
<span id="classic-docs-build"></span><h2>Building Classic Documentation<a class="headerlink" href="#building-classic-documentation" title="Permalink to this heading">#</a></h2>
<p>Some of the documentation is built by a “classic” process as described below using the documentation tools listed below which are
automatically downloaded and installed if needed while building the PETSc documentation./</p>
<ul class="simple">
<li><p><a class="reference external" href="http://ftp.mcs.anl.gov/pub/sowing/sowing.tar.gz">Sowing</a>: a text processing tool developed by Bill Gropp.  This produces the PETSc manual pages; see the <a class="reference external" href="http://wgropp.cs.illinois.edu/projects/software/sowing/doctext/doctext.htm">Sowing documentation</a> and <a class="reference internal" href="style.html#manual-page-format"><span class="std std-ref">Manual Page Format</span></a>.</p></li>
<li><p><a class="reference external" href="http://ftp.mcs.anl.gov/pub/petsc/c2html.tar.gz">C2html</a>: A text processing package. This generates the HTML versions of all the source code.</p></li>
</ul>
<p>Sowing and C2html are build tools that do not use the compilers specified to PETSc’s <code class="docutils literal notranslate"><span class="pre">configure</span></code>, as they
need to work in cross-compilation environments. Thus, they default to using <code class="docutils literal notranslate"><span class="pre">gcc</span></code>, <code class="docutils literal notranslate"><span class="pre">g++</span></code>, and <code class="docutils literal notranslate"><span class="pre">flex</span></code> from
the user’s environment (or <code class="docutils literal notranslate"><span class="pre">configure</span></code> options like <code class="docutils literal notranslate"><span class="pre">--download-sowing-cxx</span></code>). Microsoft Windows users should install <code class="docutils literal notranslate"><span class="pre">gcc</span></code>
etc. from Cygwin as these tools don’t build with Microsoft or Intel Windows compilers.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="venv-footnote"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>This requires Python 3.3 or later, and you maybe need to install a package like <code class="docutils literal notranslate"><span class="pre">python3-venv</span></code>.</p>
</dd>
<dt class="label" id="bibtex-footnote"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>The extensions’s <a class="reference external" href="https://github.com/mcmtroffaes/sphinxcontrib-bibtex">development branch</a> <a class="reference external" href="https://github.com/mcmtroffaes/sphinxcontrib-bibtex/pull/185">supports our use case better</a> (<code class="docutils literal notranslate"><span class="pre">:footcite:</span></code>), which can be investigated if a release is ever made.</p>
</dd>
<dt class="label" id="svg-footnote"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">rsvg-convert</span></code> is installable with your package manager, e.g., <code class="docutils literal notranslate"><span class="pre">librsvg2-bin</span></code> on Debian/Ubuntu systems).</p>
</dd>
<dt class="label" id="maintainer-fast-image-footnote"><span class="brackets"><a class="fn-backref" href="#id4">4</a></span></dt>
<dd><p>Maintainers may directly push commits.</p>
</dd>
</dl>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="testing.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">PETSc Testing System</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="design.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">The Design of PETSc</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-guidelines">
   General Guidelines
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#documentation-with-sphinx">
   Documentation with Sphinx
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#building-the-html-docs-locally">
     Building the HTML docs locally
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#building-the-manual-locally-as-a-pdf-via-latex">
     Building the manual locally as a PDF via LaTeX
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sphinx-documentation-guidelines">
     Sphinx Documentation Guidelines
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#images">
   Images
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#image-guidelines">
     Image Guidelines
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#adding-new-images">
     Adding new images
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#removing-renaming-moving-or-updating-images">
     Removing, renaming, moving or updating images
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cleaning-up-the-images-repository-maintainers-only">
     Cleaning up the images repository (maintainers only)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#building-classic-documentation">
   Building Classic Documentation
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://gitlab.com/petsc/petsc/edit/release/doc/developers/documentation.rst">
        <i class="fa-solid fa-pencil"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../_sources/developers/documentation.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 1991-2023, UChicago Argonne, LLC and the PETSc Development Team.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
Last updated on 2023-04-30T09:17:39-0500 (v3.19.1).<br>
</p>
  </div>
  
</div>
  </footer>
  </body>
</html>